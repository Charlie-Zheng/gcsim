(function(){"use strict";self.importScripts("/gcsim/wasm_exec.js"),WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=async(e,a)=>{const t=await(await e).arrayBuffer();return await WebAssembly.instantiate(t,a)});let s=!1;function d(e){const a=new Go;WebAssembly.instantiateStreaming(fetch(e.wasm),a.importObject).then(t=>{a.run(t.instance),console.log("helper loaded okay"),s=!0}).catch(t=>{console.error(t),postMessage({type:r.Failed,reason:t instanceof Error?t.message:"Unknown Error"})})}function l(e){const a=JSON.parse(validateConfig(e.cfg));return a.error?{type:r.Failed,reason:a.error,id:e.id}:{type:r.Validate,cfg:a,id:e.id}}function c(e){const a=JSON.parse(sample(e.cfg,e.seed));return a.error?{type:r.Failed,reason:a.error,id:e.id}:{type:r.Sample,sample:a,id:e.id}}function u(e){switch(e.type){case n.Validate:return l(e);case n.Sample:return c(e);default:throw console.error("helper - unknown request: ",e),new Error("helper unknown request")}}const i=[];onmessage=e=>{if(e.data.type==n.Ready){d(e.data);return}i.push(e),o()};function o(){if(!s){setTimeout(o,100);return}const e=i.shift();e&&postMessage(u(e.data))}var n=(e=>(e.Ready="ready",e.Validate="validate",e.Sample="sample",e))(n||{}),r=(e=>(e.Failed="failed",e.Validate="validated",e.Sample="sample",e))(r||{})})();
